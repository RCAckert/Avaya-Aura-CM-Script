{"name":"Avaya-aura-cm-script","tagline":"","body":"### MAC Address, Serial Number and Firmware Report for Avaya IP Endpoints\r\n\r\nThere are a few data elements that cannot easily be gathered through the traditional system administration terminal or System Manager. I find it useful to perform an audit of all of your Avaya H323 endpoints before and after upgrades. In the event you lose an endpoint, knowing the mac-address can significantly help you track down the endpoint to a specific port. Unfortunately, the only means of doing this is to perform a status station on each and every endpoint - not very practical or efficient when your dealing with thousands of endpoints.\r\n\r\nIn addition, there is useful information about the end-points that can only be gathered via SNMP. For example, the serial number of the phone, the list of alternate gate keepers, active DHCP server, etc.  Unless you have expensive management tools already actively managing these devices, it's otherwise impossible to gather this information manually.\r\n\r\nThis script in its current form can be used to generate a CSV report of the following elements:\r\n\r\n1) Extension \r\n2) Serial number \r\n3) Configured set-type \r\n4) IP-Address \r\n5) Service State \r\n6) Connected Set-type \r\n7) MAC-Address \r\n8) Firmware version\r\n\r\nThe first subroutine performs a 'list-registered' command against a givenvCommunication Manager instance. The second subroutine performs a status station for each extension gathered in the list-registered sub-routine. The third subroutine performs an snmp get on each endpoint using the ip-address gathered int he list-registered subroutine.\r\n\r\nAny of the subroutines can be modified to gather alternative data elements. However, the Avaya OSSI labels the data elements as hexadecimal field identifiers (FIDs). Therefore, you may need to run a few test commands to determine what FIDs you want.\r\n\r\nThe $MIB1 value in the SNMP subroutine can be changed to any Avaya endpoint OID you want to snag.\r\n\r\nThe \"$PBX\" variable defines the CM instance. The connection details of each instance are defined in the OSSI Module (cli_ossi.pm).\r\n\r\nThe cli_ossi module listed below is a modified version of Ben Roy's Definity.pm which is used to interface with Communication Manager via XML Interface. https://github.com/benroy73/pbxd.\r\n\r\nSNMP LIBRARY The following modules should not be confused with the SNMP modues perl modules found in CPAN (i.e. Net::SNMP). These modules were previously maintained by http://www.switch.ch/misc/leinen/snmp/perl/ They are now publicly available on code.google.com/p/snmp-session The entire package which includes all three modules can be downloaded modules can be downloaded from https://snmp-session.googlecode.com/files/SNMP_Session-1.13.tar.gz","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}